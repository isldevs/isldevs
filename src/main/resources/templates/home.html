<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Home - Welcome</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        .user-card {
            transition: transform 0.2s ease;
        }
        .user-card:hover {
            transform: translateY(-2px);
        }
        .provider-badge {
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
        }
        .auth-type-icon {
            width: 24px;
            height: 24px;
        }
    </style>
</head>
<body class="bg-light">
<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        <a class="navbar-brand" th:href="@{/home}">
            <i class="bi bi-house-fill me-2"></i>iSLDevs
        </a>
        <div class="navbar-nav ms-auto">
                <span class="navbar-text me-3">
                    <i class="bi bi-person-circle me-1"></i>
                    <span sec:authentication="name">User</span>
                </span>
            <form th:action="@{/logout}" method="post" class="d-inline">
                <button type="submit" class="btn btn-outline-light btn-sm">
                    <i class="bi bi-box-arrow-right me-1"></i>Logout
                </button>
            </form>
        </div>
    </div>
</nav>

<!-- Main Content -->
<div class="container mt-4">
    <div class="row">
        <!-- User Info Sidebar -->
        <div class="col-md-4 mb-4">
            <div class="card user-card">
                <div class="card-header bg-white">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-person-badge me-2"></i>User Profile
                    </h5>
                </div>
                <div class="card-body">
                    <!-- Form Login User -->
                    <div th:if="${authType == 'form'}">
                        <div class="text-center mb-3">
                            <i class="bi bi-person-circle" style="font-size: 3rem; color: #6c757d;"></i>
                        </div>
                        <p><strong>Username:</strong> <span th:text="${userName}">N/A</span></p>
                        <p><strong>Authentication:</strong>
                            <span class="badge bg-info provider-badge">Form Login</span>
                        </p>
                        <p th:if="${roles != null}">
                            <strong>Roles:</strong>
                            <span th:each="role : ${roles}" class="badge bg-secondary me-1 provider-badge">
                                    <span th:text="${role.authority}">ROLE</span>
                                </span>
                        </p>
                    </div>

                    <!-- Google OAuth2 User -->
                    <div th:if="${authType == 'oauth2' and provider == 'google'}">
                        <div class="text-center mb-3">
                            <img th:if="${userPicture}" th:src="${userPicture}"
                                 class="rounded-circle" width="80" height="80" alt="Profile">
                            <i th:unless="${userPicture}" class="bi bi-google"
                               style="font-size: 3rem; color: #DB4437;"></i>
                        </div>
                        <p><strong>Name:</strong> <span th:text="${userName}">N/A</span></p>
                        <p th:if="${userEmail}"><strong>Email:</strong> <span th:text="${userEmail}">N/A</span></p>
                        <p><strong>Provider:</strong>
                            <span class="badge bg-danger provider-badge">
                                    <i class="bi bi-google me-1"></i>Google
                                </span>
                        </p>
                    </div>

                    <!-- GitHub OAuth2 User -->
                    <div th:if="${authType == 'oauth2' and provider == 'github'}">
                        <div class="text-center mb-3">
                            <img th:if="${userAvatar}" th:src="${userAvatar}"
                                 class="rounded-circle" width="80" height="80" alt="Profile">
                            <i th:unless="${userAvatar}" class="bi bi-github"
                               style="font-size: 3rem; color: #24292e;"></i>
                        </div>
                        <p><strong>Name:</strong> <span th:text="${userName}">N/A</span></p>
                        <p th:if="${userLogin}"><strong>Username:</strong> <span th:text="${userLogin}">N/A</span></p>
                        <p th:if="${userEmail}"><strong>Email:</strong> <span th:text="${userEmail}">N/A</span></p>
                        <p><strong>Provider:</strong>
                            <span class="badge bg-dark provider-badge">
                                    <i class="bi bi-github me-1"></i>GitHub
                                </span>
                        </p>
                    </div>

                    <!-- Facebook OAuth2 User -->
                    <div th:if="${authType == 'oauth2' and provider == 'facebook'}">
                        <div class="text-center mb-3">
                            <img th:if="${userPicture}" th:src="${userPicture}"
                                 class="rounded-circle" width="80" height="80" alt="Profile">
                            <i th:unless="${userPicture}" class="bi bi-facebook"
                               style="font-size: 3rem; color: #3b5998;"></i>
                        </div>
                        <p><strong>Name:</strong> <span th:text="${userName}">N/A</span></p>
                        <p th:if="${userEmail}"><strong>Email:</strong> <span th:text="${userEmail}">N/A</span></p>
                        <p th:if="${userId}"><strong>User ID:</strong> <span th:text="${userId}">N/A</span></p>
                        <p><strong>Provider:</strong>
                            <span class="badge bg-primary provider-badge">
                            <i class="bi bi-facebook me-1"></i>Facebook</span>
                        </p>
                    </div>

                    <!-- Unknown Provider -->
                    <div th:if="${authType == 'oauth2' and provider == 'unknown'}">
                        <div class="text-center mb-3">
                            <i class="bi bi-question-circle" style="font-size: 3rem; color: #6c757d;"></i>
                        </div>
                        <p><strong>Authentication:</strong>
                            <span class="badge bg-warning provider-badge">OAuth2</span>
                        </p>
                        <p><small class="text-muted">Connected via external provider</small></p>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="card mt-3">
                <div class="card-header bg-white">
                    <h6 class="card-title mb-0">Quick Actions</h6>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <a href="#" class="btn btn-outline-primary btn-sm">
                            <i class="bi bi-pencil me-1"></i>Edit Profile
                        </a>
                        <a href="#" class="btn btn-outline-secondary btn-sm">
                            <i class="bi bi-shield me-1"></i>Security Settings
                        </a>
                        <form th:action="@{/logout}" method="post" class="d-grid">
                            <button type="submit" class="btn btn-outline-danger btn-sm">
                                <i class="bi bi-box-arrow-right me-1"></i>Sign Out
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="col-md-8">
            <!-- Welcome Header -->
            <div class="card mb-4">
                <div class="card-body text-center py-5">
                    <h1 class="display-4 text-primary mb-3">Welcome!</h1>
                    <p class="lead" th:if="${authType == 'form'}">
                        You've successfully signed in with your username and password.
                    </p>
                    <p class="lead" th:if="${authType == 'oauth2'}">
                        You've successfully signed in with
                        <span th:if="${provider == 'google'}">Google</span>
                        <span th:if="${provider == 'github'}">GitHub</span>.
                    </p>
                    <div class="mt-4">
                            <span class="badge bg-success fs-6">
                                <i class="bi bi-check-circle-fill me-1"></i>
                                Authentication Successful
                            </span>
                    </div>
                </div>
            </div>

            <!-- Dashboard Cards -->
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <i class="bi bi-speedometer2" style="font-size: 2rem; color: #0d6efd;"></i>
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h5 class="card-title">Dashboard</h5>
                                    <p class="card-text">Access your personal dashboard</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <i class="bi bi-person" style="font-size: 2rem; color: #6f42c1;"></i>
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h5 class="card-title">Profile</h5>
                                    <p class="card-text">Manage your account settings</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <i class="bi bi-shield" style="font-size: 2rem; color: #198754;"></i>
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h5 class="card-title">Security</h5>
                                    <p class="card-text">Update your security preferences</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <i class="bi bi-gear" style="font-size: 2rem; color: #fd7e14;"></i>
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h5 class="card-title">Settings</h5>
                                    <p class="card-text">Configure application settings</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="card">
                <div class="card-header bg-white">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-clock-history me-2"></i>Recent Activity
                    </h5>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        <div class="list-group-item">
                            <div class="d-flex align-items-center">
                                <i class="bi bi-check-circle-fill text-success me-3"></i>
                                <div>
                                    <strong>Successful login</strong>
                                    <p class="mb-0 text-muted">
                                        <span th:if="${authType == 'form'}">Form authentication</span>
                                        <span th:if="${authType == 'oauth2'}">
                                                <span th:if="${provider == 'google'}">Google OAuth2</span>
                                                <span th:if="${provider == 'github'}">GitHub OAuth2</span>
                                            </span>
                                        • Just now
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="list-group-item">
                            <div class="d-flex align-items-center">
                                <i class="bi bi-info-circle-fill text-info me-3"></i>
                                <div>
                                    <strong>Session started</strong>
                                    <p class="mb-0 text-muted">New user session created • Just now</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="bg-dark text-light mt-5 py-4">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h5>MyApp</h5>
                <p class="text-muted">Secure authentication system with multiple login options.</p>
            </div>
            <div class="col-md-6 text-md-end">
                <p class="text-muted mb-0">
                    &copy; 2024 MyApp •
                    <span sec:authentication="name">User</span> •
                    <span th:if="${authType == 'form'}">Form Login</span>
                    <span th:if="${authType == 'oauth2'}">
                            <span th:if="${provider == 'google'}">Google</span>
                            <span th:if="${provider == 'github'}">GitHub</span>
                        </span>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>